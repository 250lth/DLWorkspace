{% set prometheus_url = "192.168.255.1:9091" %}

kind: ConfigMap
metadata:
  name: grafana-configuration
  namespace: kube-system
apiVersion: v1
data:
  jobview-dashboard.json: '{"dashboard":{"style":"dark","rows":[{"repeat":null,"titleSize":"h6","repeatIteration":null,"title":"Dashboard
    Row","height":"30px","repeatRowId":null,"panels":[{"span":12,"links":[],"title":"","height":"30px","content":"[JobLevelMetrics](/dashboard/db/joblevelmetrics?var-job=$job)  |
    \n [TaskRoleLevelMetrics](/dashboard/db/taskrolelevelmetrics?var-job=$job)  |\n
    [TaskLevelMetrics](/dashboard/db/tasklevelmetrics?var-job=$job)","mode":"markdown","type":"text","id":31}],"showTitle":false,"collapse":false},{"repeat":null,"titleSize":"h6","repeatIteration":null,"title":"Dashboard
    Row","height":"250px","repeatRowId":null,"panels":[{"bars":false,"timeFrom":null,"links":[],"thresholds":[{"colorMode":"custom","op":"gt","fillColor":"rgba(216,
    200, 27, 0.27)","value":0,"fill":false}],"spaceLength":10,"nullPointMode":"connected","renderer":"flot","linewidth":1,"steppedLine":false,"id":7,"fill":0,"span":4,"title":"CPU","tooltip":{"sort":0,"shared":false,"value_type":"individual","msResolution":false},"stack":false,"targets":[{"intervalFactor":2,"expr":"avg
    by (job_name)(task_cpu_percent{job_name=~\"$job\"}) ","instant":false,"refId":"A","format":"time_series"}],"transparent":false,"yaxes":[{"show":true,"logBase":1,"label":"%","min":0,"format":"percent"},{"show":false,"max":null,"logBase":1,"min":null,"format":"short"}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":true,"type":"graph","dashes":false,"repeat":null,"error":false,"editable":true,"grid":{},"dashLength":10,"legend":{"rightSide":false,"total":false,"min":false,"max":false,"show":false,"current":false,"hideEmpty":false,"values":false,"alignAsTable":false,"avg":false},"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":"PM","pointradius":5,"minSpan":null,"decimals":3},{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"connected","renderer":"flot","linewidth":1,"steppedLine":false,"id":17,"fill":0,"span":4,"title":"memory
    usage","tooltip":{"sort":0,"shared":true,"value_type":"individual","msResolution":false},"stack":false,"targets":[{"hide":false,"target":"","format":"time_series","expr":"avg
    by (job_name) (task_mem_usage_byte{ job_name=~\"$job\"})","metric":"","interval":"","step":600,"intervalFactor":2,"instant":false,"refId":"A"}],"transparent":false,"yaxes":[{"logBase":1,"show":true,"max":null,"format":"bytes","min":null,"label":"GB"},{"show":true,"max":null,"logBase":1,"min":null,"format":"short"}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[{"alias":"/Apps|Buffers|Cached|Free|Slab|SwapCached|PageTables|VmallocUsed/"},{"alias":"Swap"}],"percentage":false,"type":"graph","dashes":false,"repeat":null,"error":false,"editable":true,"grid":{},"dashLength":10,"legend":{"total":false,"show":false,"max":false,"min":false,"current":false,"values":false,"avg":false},"timeShift":null,"aliasColors":{"Slab":"#E5A8E2","Swap":"#E24D42"},"lines":true,"points":false,"datasource":"PM","pointradius":5,"minSpan":2,"decimals":2},{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"connected","renderer":"flot","linewidth":1,"steppedLine":false,"id":12,"fill":0,"span":4,"title":"Network
    Traffic","tooltip":{"sort":0,"shared":true,"value_type":"cumulative","msResolution":false},"stack":false,"targets":[{"target":"","format":"time_series","expr":"avg
    by (job_name) (task_net_in_byte{job_name=~\"$job\"})","metric":"","interval":"","step":600,"legendFormat":"Network
    Inbound","intervalFactor":2,"refId":"A"},{"hide":false,"format":"time_series","expr":"avg
    by (job_name) (task_net_out_byte{job_name=~\"$job\"})","interval":"","step":600,"legendFormat":"Network
    Outbound","intervalFactor":2,"refId":"B"}],"yaxes":[{"logBase":1,"show":true,"max":null,"format":"Bps","min":null,"label":""},{"show":false,"max":null,"logBase":1,"min":null,"format":"short"}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[{"alias":"/.*_in/","transform":"negative-Y"}],"percentage":false,"type":"graph","dashes":false,"repeat":null,"error":false,"editable":true,"grid":{},"dashLength":10,"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":"PM","pointradius":5,"minSpan":null}],"showTitle":false,"collapse":false},{"repeat":null,"titleSize":"h6","repeatIteration":null,"title":"Row
    title","height":"250px","repeatRowId":null,"panels":[{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"connected","renderer":"flot","linewidth":1,"steppedLine":false,"id":9,"fill":0,"span":4,"title":"Disk
    Bandwidth","tooltip":{"sort":0,"shared":true,"value_type":"cumulative","msResolution":true},"stack":false,"targets":[{"target":"","format":"time_series","expr":"avg
    by (job_name) (irate(task_block_in_byte{ job_name=~\"$job\"}[300s]))","metric":"","interval":"","step":600,"legendFormat":"Disk
    Read","intervalFactor":2,"refId":"A"},{"intervalFactor":2,"expr":"avg by (job_name)
    (irate(task_block_out_byte{job_name=~\"$job\"}[300s]))","refId":"B","legendFormat":"Disk
    Write","format":"time_series"}],"yaxes":[{"show":true,"max":null,"logBase":1,"min":0,"format":"Bps"},{"show":false,"max":null,"logBase":1,"min":null,"format":"short"}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"repeat":null,"error":false,"editable":true,"grid":{},"dashLength":10,"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":"PM","pointradius":5,"minSpan":null,"decimals":3},{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"connected","renderer":"flot","linewidth":1,"steppedLine":false,"id":28,"fill":0,"span":4,"title":"GPU
    Utilization","tooltip":{"sort":0,"shared":true,"value_type":"cumulative","msResolution":true},"stack":false,"targets":[{"target":"","format":"time_series","expr":"avg
    by (job_name)(task_gpu_percent{job_name=~\"$job\"})","metric":"","interval":"","step":600,"intervalFactor":2,"refId":"A"}],"yaxes":[{"show":true,"max":100,"logBase":1,"min":0,"format":"percent"},{"show":false,"max":null,"logBase":1,"min":null,"format":"short"}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"error":false,"editable":true,"grid":{},"dashLength":10,"legend":{"total":false,"show":false,"max":false,"min":false,"current":false,"values":false,"avg":false},"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":"PM","pointradius":5,"minSpan":null,"decimals":3},{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"connected","renderer":"flot","linewidth":1,"steppedLine":false,"id":27,"fill":0,"span":4,"title":"GPU
    Memory","tooltip":{"sort":0,"shared":true,"value_type":"cumulative","msResolution":true},"stack":false,"targets":[{"intervalFactor":2,"expr":"avg
    by (job_name) (task_gpu_mem_percent{job_name=~\"$job\"})","instant":false,"refId":"B","format":"time_series"}],"yaxes":[{"show":true,"max":null,"logBase":1,"min":0,"format":"percent"},{"show":false,"max":null,"logBase":1,"min":null,"format":"short"}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"error":false,"editable":true,"grid":{},"dashLength":10,"legend":{"total":false,"show":false,"max":false,"min":false,"current":false,"values":false,"avg":false},"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":"PM","pointradius":5,"minSpan":null,"decimals":3}],"showTitle":false,"collapse":false}],"description":"Dashboard
    to view multiple servers","links":[],"tags":[],"graphTooltip":0,"hideControls":false,"title":"JobLevelMetrics","editable":true,"refresh":"30s","id":null,"gnetId":null,"timepicker":{"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"],"now":true,"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"]},"version":10,"time":{"to":"now","from":"now-15m"},"timezone":"browser","schemaVersion":14,"annotations":{"list":[{"enable":true,"hide":true,"name":"Annotations
    & Alerts","builtIn":1,"datasource":"-- Grafana --","type":"dashboard","iconColor":"rgba(0,
    211, 255, 1)"}]},"templating":{"list":[{"regex":"^(?!\\s*$).+","sort":1,"multi":false,"hide":0,"name":"job","tags":[],"allValue":null,"tagValuesQuery":"","allFormat":"glob","refresh":1,"label":"","current":{"text":"","value":["$__all"]},"options":[],"datasource":"PM","type":"query","query":"label_values(task_cpu_percent,
    job_name)","useTags":false,"tagsQuery":"","multiFormat":"regex values","includeAll":false}]}}}'
  serviceview-dashboard.json: '{"dashboard":{"style":"dark","rows":[{"repeat":null,"titleSize":"h6","repeatIteration":null,"title":"Dashboard
    Row","height":"250px","repeatRowId":null,"panels":[{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"height":"400px","renderer":"flot","linewidth":1,"steppedLine":false,"id":1,"fill":1,"span":6,"title":"CPU","tooltip":{"sort":0,"shared":false,"value_type":"individual"},"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"targets":[{"intervalFactor":2,"expr":"service_cpu_percent{name=\"$service_name\"}","refId":"A","legendFormat":"{{"{{instance}}"}}","format":"time_series"}],"yaxes":[{"logBase":1,"show":true,"max":null,"format":"percent","min":null,"label":null},{"logBase":1,"show":false,"max":null,"format":"short","min":null,"label":null}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"dashLength":10,"nullPointMode":"connected","stack":false,"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":"PM","pointradius":5},{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"height":"400px","renderer":"flot","linewidth":1,"steppedLine":false,"id":2,"fill":1,"span":6,"title":"Memory
    Usage","tooltip":{"sort":0,"shared":true,"value_type":"individual"},"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"targets":[{"intervalFactor":2,"expr":"service_mem_usage_byte{name=\"$service_name\"}","refId":"A","legendFormat":"{{"{{instance}}"}}","format":"time_series"}],"yaxes":[{"logBase":1,"show":true,"max":null,"format":"decbytes","min":null,"label":null},{"logBase":1,"show":true,"max":null,"format":"short","min":null,"label":null}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"dashLength":10,"nullPointMode":"null","stack":false,"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":"PM","pointradius":5}],"showTitle":false,"collapse":false},{"repeat":null,"titleSize":"h6","repeatIteration":null,"title":"Dashboard
    Row","height":250,"repeatRowId":null,"panels":[{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"height":"400px","renderer":"flot","linewidth":1,"steppedLine":false,"id":3,"fill":1,"span":6,"title":"Network","tooltip":{"sort":0,"shared":true,"value_type":"individual"},"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"targets":[{"format":"time_series","expr":"service_net_in_byte{name=\"$service_name\"}","interval":"","legendFormat":"{{"{{instance}}"}}
    Inbound","intervalFactor":2,"refId":"A"},{"intervalFactor":2,"expr":"service_net_out_byte{name=\"$service_name\"}","refId":"B","legendFormat":"{{"{{instance}}"}}
    Outbound","format":"time_series"}],"yaxes":[{"logBase":1,"show":true,"max":null,"format":"Bps","min":null,"label":null},{"logBase":1,"show":true,"max":null,"format":"short","min":null,"label":null}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"dashLength":10,"nullPointMode":"null","stack":false,"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":"PM","pointradius":5},{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"height":"400px","renderer":"flot","linewidth":1,"steppedLine":false,"id":4,"fill":1,"span":6,"title":"Block
    IO","tooltip":{"sort":0,"shared":true,"value_type":"individual"},"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"targets":[{"format":"time_series","expr":"irate(service_block_in_byte{name=\"$service_name\"}[300s])","interval":"","legendFormat":"{{"{{instance}}"}}
    Read","intervalFactor":2,"refId":"A"},{"intervalFactor":2,"expr":"irate(service_block_out_byte{name=\"$service_name\"}[300s])","refId":"B","legendFormat":"{{"{{instance}}"}}
    Write","format":"time_series"}],"yaxes":[{"logBase":1,"show":true,"max":null,"format":"Bps","min":null,"label":null},{"logBase":1,"show":true,"max":null,"format":"short","min":null,"label":null}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"dashLength":10,"nullPointMode":"null","stack":false,"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":"PM","pointradius":5}],"showTitle":false,"collapse":false}],"description":"Dashboard
    to view pai service metrics","links":[],"tags":[],"graphTooltip":0,"hideControls":false,"title":"Service Metrics","editable":true,"refresh":"30s","id":null,"gnetId":null,"timepicker":{"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"],"now":true,"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"]},"version":1,"time":{"to":"now","from":"now-1h"},"timezone":"browser","schemaVersion":14,"annotations":{"list":[{"enable":true,"hide":true,"name":"Annotations
    & Alerts","builtIn":1,"datasource":"-- Grafana --","type":"dashboard","iconColor":"rgba(0,
    211, 255, 1)"}]},"templating":{"list":[{"regex":"","sort":0,"multi":false,"hide":0,"name":"service_name","tags":[],"allValue":null,"tagValuesQuery":"","refresh":1,"label":null,"current":{"text":"hadoop-resource-manager","value":"hadoop-resource-manager","tags":[]},"datasource":"PM","type":"query","query":"label_values(service_cpu_percent,
    name)","useTags":false,"tagsQuery":"","options":[{"text":"alertmanager","selected":false,"value":"alertmanager"},{"text":"end-to-end-test","selected":false,"value":"end-to-end-test"},{"text":"grafana","selected":false,"value":"grafana"},{"text":"hadoop-data-node","selected":false,"value":"hadoop-data-node"},{"text":"hadoop-jobhistory-service","selected":false,"value":"hadoop-jobhistory-service"},{"text":"hadoop-name-node","selected":false,"value":"hadoop-name-node"},{"text":"hadoop-node-manager","selected":false,"value":"hadoop-node-manager"},{"text":"hadoop-resource-manager","selected":true,"value":"hadoop-resource-manager"},{"text":"job-exporter","selected":false,"value":"job-exporter"},{"text":"node-exporter","selected":false,"value":"node-exporter"},{"text":"nvidia-drivers","selected":false,"value":"nvidia-drivers"},{"text":"prometheus","selected":false,"value":"prometheus"},{"text":"pylon","selected":false,"value":"pylon"},{"text":"rest-server","selected":false,"value":"rest-server"},{"text":"watchdog","selected":false,"value":"watchdog"},{"text":"webportal","selected":false,"value":"webportal"},{"text":"yarn-exporter","selected":false,"value":"yarn-exporter"},{"text":"yarn-frameworklauncher","selected":false,"value":"yarn-frameworklauncher"},{"text":"zookeeper","selected":false,"value":"zookeeper"}],"includeAll":false}]}}}'
  taskroleview-dashboard.json: '{"dashboard":{"style":"dark","rows":[{"repeat":null,"titleSize":"h6","repeatIteration":null,"title":"Dashboard
    Row","height":"30px","repeatRowId":null,"panels":[{"span":12,"links":[],"title":"","height":"30px","content":"[JobLevelMetrics](/dashboard/db/joblevelmetrics?var-job=$job)  |
    \n [TaskRoleLevelMetrics](/dashboard/db/taskrolelevelmetrics?var-job=$job)  |\n
    [TaskLevelMetrics](/dashboard/db/tasklevelmetrics?var-job=$job)","mode":"markdown","type":"text","id":24}],"showTitle":false,"collapse":false},{"repeat":null,"titleSize":"h6","repeatIteration":null,"title":"CPU","height":"250px","repeatRowId":null,"panels":[{"bars":false,"timeFrom":null,"links":[{"title":"JobLevelMetrics","targetBlank":true,"dashUri":"db/joblevelmetrics","params":"var-job=$job","type":"dashboard","dashboard":"JobLevelMetrics"},{"title":"TaskLevelMetrics","targetBlank":true,"dashUri":"db/tasklevelmetrics","params":"var-job=$job","type":"dashboard","dashboard":"TaskLevelMetrics"}],"thresholds":[{"colorMode":"custom","op":"gt","fillColor":"rgba(216,
    200, 27, 0.27)","value":0,"fill":false}],"spaceLength":10,"nullPointMode":"connected","renderer":"flot","linewidth":1,"steppedLine":false,"id":7,"fill":0,"span":4,"title":"CPU","tooltip":{"sort":0,"shared":false,"value_type":"individual","msResolution":false},"stack":false,"targets":[{"instant":false,"format":"time_series","expr":"avg
    by (job_name, role_name) (task_cpu_percent{job_name=~\"$job\"})","legendFormat":"{{"{{role_name}}"}}","intervalFactor":2,"refId":"A"}],"transparent":false,"yaxes":[{"show":true,"logBase":1,"label":"%","min":0,"format":"percent"},{"show":false,"max":null,"logBase":1,"min":null,"format":"short"}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":true,"type":"graph","dashes":false,"repeat":null,"error":false,"editable":true,"grid":{},"dashLength":10,"legend":{"rightSide":false,"total":false,"min":false,"max":false,"show":true,"current":false,"hideEmpty":false,"values":false,"alignAsTable":false,"avg":false},"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":"PM","pointradius":5,"minSpan":null,"decimals":3},{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"connected","renderer":"flot","linewidth":1,"steppedLine":false,"id":17,"fill":0,"span":4,"title":"memory
    usage","tooltip":{"sort":0,"shared":true,"value_type":"individual","msResolution":false},"stack":false,"targets":[{"hide":false,"target":"","format":"time_series","expr":"avg
    by (job_name, role_name) (task_mem_usage_byte{job_name=~\"$job\"})","metric":"","interval":"","step":600,"legendFormat":"{{"{{role_name}}"}}","intervalFactor":2,"instant":false,"refId":"A"}],"transparent":false,"yaxes":[{"logBase":1,"show":true,"max":null,"format":"bytes","min":null,"label":"GB"},{"show":true,"max":null,"logBase":1,"min":null,"format":"short"}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[{"alias":"/Apps|Buffers|Cached|Free|Slab|SwapCached|PageTables|VmallocUsed/"},{"alias":"Swap"}],"percentage":false,"type":"graph","dashes":false,"repeat":null,"error":false,"editable":true,"grid":{},"dashLength":10,"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"timeShift":null,"aliasColors":{"Slab":"#E5A8E2","Swap":"#E24D42"},"lines":true,"points":false,"datasource":"PM","pointradius":5,"minSpan":2,"decimals":2},{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"connected","renderer":"flot","linewidth":1,"steppedLine":false,"id":12,"fill":0,"span":4,"title":"Network
    Traffic","tooltip":{"sort":0,"shared":true,"value_type":"cumulative","msResolution":false},"stack":false,"targets":[{"target":"","expr":"avg
    by (job_name, role_name) (task_net_in_byte{job_name=~\"$job\"})","metric":"","interval":"","step":600,"legendFormat":"Net
    In {{"{{role_name}}"}}","intervalFactor":2,"refId":"A"},{"hide":false,"format":"time_series","expr":"avg
    by (job_name, role_name) (task_net_out_byte{job_name=~\"$job\"})","interval":"","step":600,"legendFormat":"Net
    Out {{"{{role_name}}"}}","intervalFactor":2,"refId":"B"}],"yaxes":[{"logBase":1,"show":true,"max":null,"format":"Bps","min":null,"label":""},{"show":false,"max":null,"logBase":1,"min":null,"format":"short"}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[{"alias":"/.*_in/","transform":"negative-Y"}],"percentage":false,"type":"graph","dashes":false,"repeat":null,"error":false,"editable":true,"grid":{},"dashLength":10,"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":"PM","pointradius":5,"minSpan":null}],"showTitle":false,"collapse":false},{"repeat":null,"titleSize":"h6","repeatIteration":null,"title":"Row
    title","height":"250px","repeatRowId":null,"panels":[{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"connected","renderer":"flot","linewidth":1,"steppedLine":false,"id":9,"fill":0,"span":4,"title":"Disk
    Bandwidth","tooltip":{"sort":0,"shared":true,"value_type":"cumulative","msResolution":true},"stack":false,"targets":[{"target":"","expr":"avg
    by (job_name, role_name) (irate(task_block_in_byte{job_name=~\"$job\"}[300s]))","metric":"","interval":"","step":600,"legendFormat":"Read
    {{"{{role_name}}"}}","intervalFactor":2,"refId":"A"},{"intervalFactor":2,"expr":"avg
    by (job_name, role_name) (irate(task_block_out_byte{job_name=~\"$job\"}[300s]))","refId":"B","legendFormat":"Write
    {{"{{role_name}}"}}"}],"yaxes":[{"show":true,"max":null,"logBase":1,"min":0,"format":"Bps"},{"show":false,"max":null,"logBase":1,"min":null,"format":"short"}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"repeat":null,"error":false,"editable":true,"grid":{},"dashLength":10,"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":"PM","pointradius":5,"minSpan":null,"decimals":3},{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"connected","renderer":"flot","linewidth":1,"steppedLine":false,"id":18,"fill":0,"span":4,"title":"GPU
    Utilization","tooltip":{"sort":0,"shared":true,"value_type":"cumulative","msResolution":true},"stack":false,"targets":[{"target":"","format":"time_series","expr":"avg
    by (job_name, role_name)(task_gpu_percent{job_name=~\"$job\"})","metric":"","interval":"","step":600,"legendFormat":"{{"{{role_name}}"}}","intervalFactor":2,"refId":"A"}],"yaxes":[{"show":true,"max":100,"logBase":1,"min":0,"format":"percent"},{"show":false,"max":null,"logBase":1,"min":null,"format":"short"}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"error":false,"editable":true,"grid":{},"dashLength":10,"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":"PM","pointradius":5,"minSpan":null,"decimals":3},{"bars":false,"timeFrom":null,"links":[{"type":"dashboard","title":"JobLevelMetrics","params":"var-job=$job","dashUri":"db/joblevelmetrics","dashboard":"JobLevelMetrics"},{"type":"dashboard","title":"TaskLevelMetrics","params":"var-job=$job","dashUri":"db/tasklevelmetrics","dashboard":"TaskLevelMetrics"}],"thresholds":[],"spaceLength":10,"nullPointMode":"connected","renderer":"flot","linewidth":1,"steppedLine":false,"id":23,"fill":0,"span":4,"title":"GPU
    Memory","tooltip":{"sort":0,"shared":true,"value_type":"cumulative","msResolution":true},"stack":false,"targets":[{"intervalFactor":2,"expr":"avg
    by (job_name, role_name) (task_gpu_mem_percent{job_name=~\"$job\"})","refId":"B","legendFormat":"{{"{{role_name}}"}}","format":"time_series"}],"yaxes":[{"show":true,"max":null,"logBase":1,"min":0,"format":"percent"},{"show":false,"max":null,"logBase":1,"min":null,"format":"short"}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"error":false,"editable":true,"grid":{},"dashLength":10,"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":"PM","pointradius":5,"minSpan":null,"decimals":3}],"showTitle":false,"collapse":false}],"description":"Dashboard
    to view multiple servers","links":[],"tags":[],"graphTooltip":0,"hideControls":false,"title":"TaskRoleLevelMetrics","editable":true,"refresh":"30s","id":null,"gnetId":null,"timepicker":{"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"],"now":true,"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"]},"version":15,"time":{"to":"now","from":"now-15m"},"timezone":"browser","schemaVersion":14,"annotations":{"list":[{"enable":true,"hide":true,"name":"Annotations
    & Alerts","builtIn":1,"datasource":"-- Grafana --","type":"dashboard","iconColor":"rgba(0,
    211, 255, 1)"}]},"templating":{"list":[{"regex":"^(?!\\s*$).+","sort":1,"multi":false,"hide":0,"name":"job","tags":[],"allValue":null,"tagValuesQuery":"","allFormat":"glob","refresh":1,"label":"","current":{"text":"","value":["$__all"]},"options":[],"datasource":"PM","type":"query","query":"label_values(task_cpu_percent,
    job_name)","useTags":false,"tagsQuery":"","multiFormat":"regex values","includeAll":false}]}}}'
  tasks-in-node-dashboard.json: '{"dashboard":{"style":"dark","rows":[{"repeat":null,"titleSize":"h6","repeatIteration":null,"title":"Dashboard
    Row","height":"250px","repeatRowId":null,"panels":[{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"null","renderer":"flot","id":1,"linewidth":1,"steppedLine":false,"targets":[{"hide":false,"format":"time_series","expr":"task_cpu_percent{instance=~\"$node(:[0-9]*)?$\"}","legendFormat":"{{"{{job_name}}-{{role_name}}-{{task_index}}"}}","intervalFactor":2,"refId":"A"}],"fill":0,"span":6,"title":"Task
    CPU Usage","tooltip":{"sort":0,"shared":true,"value_type":"individual"},"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"yaxes":[{"logBase":1,"show":true,"max":null,"format":"percent","min":"0","label":""},{"logBase":1,"show":false,"max":null,"format":"short","min":null,"label":null}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"dashLength":10,"stack":false,"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":null,"pointradius":5},{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"null","renderer":"flot","id":2,"linewidth":1,"steppedLine":false,"targets":[{"hide":false,"format":"time_series","expr":"task_mem_usage_byte{instance=~\"$node(:[0-9]*)?$\"}","legendFormat":"{{"{{job_name}}-{{role_name}}-{{task_index}}"}}","intervalFactor":2,"refId":"A"}],"fill":0,"span":6,"title":"Task
    Memory Usage","tooltip":{"sort":0,"shared":true,"value_type":"individual"},"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"yaxes":[{"logBase":1,"show":true,"max":null,"format":"decbytes","min":null,"label":null},{"logBase":1,"show":true,"max":null,"format":"short","min":null,"label":null}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"dashLength":10,"stack":false,"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":null,"pointradius":5},{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"null","renderer":"flot","id":3,"linewidth":1,"steppedLine":false,"targets":[{"hide":false,"format":"time_series","expr":"task_net_in_byte{instance=~\"$node(:[0-9]*)?$\"}","legendFormat":"Net
    In {{"{{job_name}}-{{role_name}}-{{task_index}}"}}","intervalFactor":2,"refId":"A"},{"intervalFactor":2,"expr":"task_net_out_byte{instance=~\"$node(:[0-9]*)?$\"}","refId":"B","legendFormat":"Net
    Out {{"{{job_name}}-{{role_name}}-{{task_index}}"}}","format":"time_series"}],"fill":0,"span":6,"title":"Task
    Network Usage","tooltip":{"sort":0,"shared":true,"value_type":"individual"},"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"yaxes":[{"logBase":1,"show":true,"max":null,"format":"Bps","min":"0","label":null},{"logBase":1,"show":false,"max":null,"format":"short","min":null,"label":null}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"dashLength":10,"stack":false,"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":null,"pointradius":5},{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"null","renderer":"flot","id":4,"linewidth":1,"steppedLine":false,"targets":[{"hide":false,"format":"time_series","expr":"irate(task_block_in_byte{instance=~\"$node(:[0-9]*)?$\"}[300s])","legendFormat":"Read
    {{"{{job_name}}-{{role_name}}-{{task_index}}"}}","intervalFactor":2,"refId":"A"},{"intervalFactor":2,"expr":"irate(task_block_out_byte{instance=~\"$node(:[0-9]*)?$\"}[300s])","refId":"B","legendFormat":"Write
    {{"{{job_name}}-{{role_name}}-{{task_index}}"}}","format":"time_series"}],"fill":0,"span":6,"title":"Task
    Disk Usage","tooltip":{"sort":0,"shared":true,"value_type":"individual"},"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"yaxes":[{"logBase":1,"show":true,"max":null,"format":"Bps","min":"0","label":null},{"logBase":1,"show":false,"max":null,"format":"short","min":null,"label":null}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"dashLength":10,"stack":false,"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":null,"pointradius":5},{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"null","renderer":"flot","id":5,"linewidth":1,"steppedLine":false,"targets":[{"hide":false,"format":"time_series","expr":"task_gpu_percent{instance=~\"$node(:[0-9]*)?$\"}","legendFormat":"{{"{{job_name}}-{{role_name}}-{{task_index}}"}}
    On GPU {{minor_number}}","intervalFactor":2,"refId":"A"}],"fill":0,"span":6,"title":"Task
    GPU Util","tooltip":{"sort":0,"shared":true,"value_type":"individual"},"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"yaxes":[{"logBase":1,"show":true,"max":null,"format":"percent","min":"0","label":null},{"logBase":1,"show":false,"max":null,"format":"short","min":null,"label":null}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"dashLength":10,"stack":false,"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":null,"pointradius":5},{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"null","renderer":"flot","id":6,"linewidth":1,"steppedLine":false,"targets":[{"hide":false,"format":"time_series","expr":"task_gpu_mem_percent{instance=~\"$node(:[0-9]*)?$\"}","legendFormat":"{{"{{job_name}}-{{role_name}}-{{task_index}}"}}
    On GPU {{minor_number}}","intervalFactor":2,"refId":"A"}],"fill":0,"span":6,"title":"Task
    GPU Memory Util","tooltip":{"sort":0,"shared":true,"value_type":"individual"},"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"yaxes":[{"logBase":1,"show":true,"max":null,"format":"percent","min":"0","label":null},{"logBase":1,"show":false,"max":null,"format":"short","min":null,"label":null}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"dashLength":10,"stack":false,"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":null,"pointradius":5}],"showTitle":false,"collapse":false},{"repeat":null,"titleSize":"h6","repeatIteration":null,"title":"Dashboard
    Row","height":250,"repeatRowId":null,"panels":[{"sort":{"col":0,"desc":true},"styles":[{"alias":"Time","type":"hidden","pattern":"Time","dateFormat":"YYYY-MM-DD
    HH:mm:ss"},{"type":"hidden","dateFormat":"YYYY-MM-DD HH:mm:ss","pattern":"__name__","thresholds":[],"alias":"","colors":["rgba(245,
    54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"colorMode":null,"decimals":2,"unit":"short"},{"type":"hidden","dateFormat":"YYYY-MM-DD
    HH:mm:ss","pattern":"instance","thresholds":[],"alias":"","colors":["rgba(245,
    54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"colorMode":null,"decimals":2,"unit":"short"},{"type":"hidden","dateFormat":"YYYY-MM-DD
    HH:mm:ss","pattern":"job","thresholds":[],"alias":"","colors":["rgba(245, 54,
    54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"colorMode":null,"decimals":2,"unit":"short"},{"type":"hidden","dateFormat":"YYYY-MM-DD
    HH:mm:ss","pattern":"pai_service_name","thresholds":[],"alias":"","colors":["rgba(245,
    54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"colorMode":null,"decimals":2,"unit":"short"},{"type":"hidden","dateFormat":"YYYY-MM-DD
    HH:mm:ss","pattern":"scraped_from","thresholds":[],"alias":"","colors":["rgba(245,
    54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"colorMode":null,"decimals":2,"unit":"short"},{"type":"hidden","dateFormat":"YYYY-MM-DD
    HH:mm:ss","pattern":"Value","thresholds":[],"alias":"","colors":["rgba(245, 54,
    54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"colorMode":null,"decimals":2,"unit":"short"},{"type":"number","dateFormat":"YYYY-MM-DD
    HH:mm:ss","colorMode":null,"thresholds":[],"linkTooltip":"Click to view each task''s
    usage","alias":"task index","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129,
    40, 0.89)","rgba(50, 172, 45, 0.97)"],"link":true,"pattern":"task_index","decimals":2,"unit":"short","linkUrl":"/dashboard/db/tasklevelmetrics?var-job=$__cell_4"},{"type":"number","dateFormat":"YYYY-MM-DD
    HH:mm:ss","colorMode":null,"thresholds":[],"linkTooltip":"Click to view each task
    role''s usage","alias":"task role","colors":["rgba(245, 54, 54, 0.9)","rgba(237,
    129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"link":true,"pattern":"role_name","decimals":2,"unit":"short","linkUrl":"/dashboard/db/taskrolelevelmetrics?var-job=$__cell_4"},{"type":"number","dateFormat":"YYYY-MM-DD
    HH:mm:ss","colorMode":null,"thresholds":[],"linkTooltip":"Click to view job''s
    usage","alias":"job name","colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40,
    0.89)","rgba(50, 172, 45, 0.97)"],"link":true,"pattern":"job_name","decimals":2,"unit":"short","linkUrl":"/dashboard/db/joblevelmetrics?var-job=$__cell_4"},{"type":"number","dateFormat":"YYYY-MM-DD
    HH:mm:ss","pattern":"username","thresholds":[],"alias":"user name","colors":["rgba(245,
    54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"colorMode":null,"decimals":2,"unit":"short"}],"repeat":null,"span":12,"links":[],"pageSize":null,"title":"Tasks
    in Node","transform":"table","showHeader":true,"scroll":true,"targets":[{"hide":false,"format":"table","expr":"task_cpu_percent{instance=~\"$node(:[0-9]*)?$\"}","intervalFactor":1,"instant":true,"refId":"A"}],"fontSize":"100%","datasource":null,"type":"table","id":7,"columns":[]}],"showTitle":false,"collapse":false}],"description":"Dashboard
    to view jobs in node","links":[],"tags":[],"graphTooltip":0,"hideControls":true,"title":"Tasks
    in Node","editable":false,"refresh":"30s","id":null,"gnetId":null,"timepicker":{"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"],"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"]},"version":1,"time":{"to":"now","from":"now-1h"},"timezone":"browser","schemaVersion":14,"annotations":{"list":[{"enable":true,"hide":true,"name":"Annotations
    & Alerts","builtIn":1,"datasource":"-- Grafana --","type":"dashboard","iconColor":"rgba(0,
    211, 255, 1)"}]},"templating":{"list":[{"regex":"/([^:]*)/","sort":1,"multi":false,"hide":0,"name":"node","tags":[],"allValue":null,"tagValuesQuery":"","refresh":1,"label":null,"current":{"text":"10.151.40.4","value":"10.151.40.4"},"datasource":"PM","type":"query","query":"label_values(node_uname_info,
    instance)","useTags":false,"tagsQuery":"","options":[],"includeAll":false}]}}}'
  taskview-dashboard.json: '{"dashboard":{"style":"dark","rows":[{"repeat":null,"titleSize":"h6","repeatIteration":null,"title":"Dashboard
    Row","height":"30px","repeatRowId":null,"panels":[{"span":12,"links":[],"title":"","height":"30px","content":"[JobLevelMetrics](/dashboard/db/joblevelmetrics?var-job=$job)  |
    \n [TaskRoleLevelMetrics](/dashboard/db/taskrolelevelmetrics?var-job=$job)  |\n
    [TaskLevelMetrics](/dashboard/db/tasklevelmetrics?var-job=$job)\n","mode":"markdown","type":"text","id":28}],"showTitle":false,"collapse":false},{"repeat":null,"titleSize":"h6","repeatIteration":null,"title":"CPU","height":"250px","repeatRowId":null,"panels":[{"bars":false,"timeFrom":null,"links":[],"thresholds":[{"colorMode":"custom","op":"gt","fillColor":"rgba(216,
    200, 27, 0.27)","value":0,"fill":false}],"spaceLength":10,"nullPointMode":"connected","renderer":"flot","linewidth":1,"steppedLine":false,"id":7,"fill":0,"span":4,"title":"CPU","tooltip":{"sort":0,"shared":false,"value_type":"individual","msResolution":false},"stack":false,"targets":[{"instant":false,"format":"time_series","expr":"avg
    by (job_name, role_name, task_index) (task_cpu_percent{job_name=~\"$job\"})","legendFormat":"{{"{{role_name}}-{{task_index}}"}}","intervalFactor":2,"refId":"A"}],"transparent":false,"yaxes":[{"show":true,"logBase":1,"label":"%","min":0,"format":"percent"},{"show":false,"max":null,"logBase":1,"min":null,"format":"short"}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[{"alias":"task
    task2","yaxis":1}],"percentage":true,"type":"graph","dashes":false,"repeat":null,"error":false,"editable":true,"grid":{},"dashLength":10,"legend":{"rightSide":false,"total":false,"min":false,"max":false,"show":true,"current":false,"hideEmpty":false,"values":false,"alignAsTable":false,"avg":false},"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":"PM","pointradius":5,"minSpan":null,"decimals":3},{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"connected","renderer":"flot","linewidth":1,"steppedLine":false,"id":17,"fill":0,"span":4,"title":"memory
    usage","tooltip":{"sort":0,"shared":true,"value_type":"individual","msResolution":false},"stack":false,"targets":[{"hide":false,"target":"","format":"time_series","expr":"avg
    by (job_name, role_name, task_index) (task_mem_usage_byte{job_name=~\"$job\"})","metric":"","interval":"","step":600,"legendFormat":"{{"{{role_name}}-{{task_index}}"}}","intervalFactor":2,"instant":false,"refId":"A"}],"transparent":false,"yaxes":[{"logBase":1,"show":true,"max":null,"format":"bytes","min":null,"label":"GB"},{"show":true,"max":null,"logBase":1,"min":null,"format":"short"}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[{"alias":"/Apps|Buffers|Cached|Free|Slab|SwapCached|PageTables|VmallocUsed/"},{"alias":"Swap"}],"percentage":false,"type":"graph","dashes":false,"repeat":null,"error":false,"editable":true,"grid":{},"dashLength":10,"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"timeShift":null,"aliasColors":{"Slab":"#E5A8E2","Swap":"#E24D42"},"lines":true,"points":false,"datasource":"PM","pointradius":5,"minSpan":2,"decimals":2},{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"connected","renderer":"flot","linewidth":1,"steppedLine":false,"id":12,"fill":0,"span":4,"title":"Network
    Traffic","tooltip":{"sort":0,"shared":true,"value_type":"cumulative","msResolution":false},"stack":false,"targets":[{"target":"","format":"time_series","expr":"avg
    by (job_name, role_name, task_index) (task_net_in_byte{job_name=~\"$job\"})","metric":"","interval":"","step":600,"legendFormat":"Net
    In {{"{{role_name}}-{{task_index}}"}}","intervalFactor":2,"refId":"A"},{"hide":false,"format":"time_series","expr":"avg
    by (job_name, role_name, task_index) (task_net_out_byte{job_name=~\"$job\"})","interval":"","step":600,"legendFormat":"Net
    Out {{"{{role_name}}-{{task_index}}"}}","intervalFactor":2,"refId":"B"}],"yaxes":[{"logBase":1,"show":true,"max":null,"format":"Bps","min":null,"label":""},{"show":false,"max":null,"logBase":1,"min":null,"format":"short"}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[{"alias":"/.*_in/","transform":"negative-Y"}],"percentage":false,"type":"graph","dashes":false,"repeat":null,"error":false,"editable":true,"grid":{},"dashLength":10,"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":"PM","pointradius":5,"minSpan":null}],"showTitle":false,"collapse":false},{"repeat":null,"titleSize":"h6","repeatIteration":null,"title":"Row
    title","height":"250px","repeatRowId":null,"panels":[{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"connected","renderer":"flot","linewidth":1,"steppedLine":false,"id":9,"fill":0,"span":4,"title":"Disk
    Bandwidth","tooltip":{"sort":0,"shared":true,"value_type":"cumulative","msResolution":true},"stack":false,"targets":[{"target":"","format":"time_series","expr":"avg
    by (job_name, role_name,task_index) (irate(task_block_in_byte{job_name=~\"$job\"}[300s]))","metric":"","interval":"","step":600,"legendFormat":"Read
    {{"{{role_name}}-{{task_index}}"}}","intervalFactor":2,"refId":"A"},{"intervalFactor":2,"expr":"avg
    by (job_name, role_name,task_index) (irate(task_block_out_byte{job_name=~\"$job\"}[300s]))","refId":"B","legendFormat":"Write
    {{"{{role_name}}-{{task_index}}"}}","format":"time_series"}],"yaxes":[{"show":true,"max":null,"logBase":1,"min":0,"format":"Bps"},{"show":false,"max":null,"logBase":1,"min":null,"format":"short"}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"repeat":null,"error":false,"editable":true,"grid":{},"dashLength":10,"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":"PM","pointradius":5,"minSpan":null,"decimals":3},{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"connected","renderer":"flot","linewidth":1,"steppedLine":false,"id":18,"fill":0,"span":4,"title":"GPU
    Utilization","tooltip":{"sort":0,"shared":true,"value_type":"cumulative","msResolution":true},"stack":false,"targets":[{"target":"","format":"time_series","expr":"avg
    by (job_name, role_name, task_index)(task_gpu_percent{job_name=~\"$job\"})","metric":"","interval":"","step":600,"legendFormat":"{{"{{role_name}}-{{task_index}}"}}","intervalFactor":2,"refId":"A"}],"yaxes":[{"show":true,"max":100,"logBase":1,"min":0,"format":"percent"},{"show":false,"max":null,"logBase":1,"min":null,"format":"short"}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"error":false,"editable":true,"grid":{},"dashLength":10,"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":"PM","pointradius":5,"minSpan":null,"decimals":3},{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"connected","renderer":"flot","linewidth":1,"steppedLine":false,"id":27,"fill":0,"span":4,"title":"GPU
    Memory","tooltip":{"sort":0,"shared":true,"value_type":"cumulative","msResolution":true},"stack":false,"targets":[{"target":"","format":"time_series","expr":"avg
    by (job_name, role_name,task_index) (task_gpu_mem_percent{job_name=~\"$job\"})","metric":"","interval":"","step":600,"legendFormat":"{{"{{role_name}}-{{task_index}}"}}","intervalFactor":2,"refId":"A"}],"yaxes":[{"show":true,"max":null,"logBase":1,"min":0,"format":"percent"},{"show":false,"max":null,"logBase":1,"min":null,"format":"short"}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"error":false,"editable":true,"grid":{},"dashLength":10,"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":"PM","pointradius":5,"minSpan":null,"decimals":3}],"showTitle":false,"collapse":false},{"repeat":null,"titleSize":"h6","repeatIteration":null,"title":"Per
    GPU Utilization","height":"250px","repeatRowId":null,"panels":[{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"connected","renderer":"flot","linewidth":1,"steppedLine":false,"id":26,"fill":0,"span":6,"title":"Task
    Per GPU Utilization","tooltip":{"sort":0,"shared":true,"value_type":"individual","msResolution":false},"stack":false,"targets":[{"hide":false,"target":"","format":"time_series","expr":"avg
    by (job_name, role_name,task_index, minor_number)(task_gpu_percent{job_name=~\"$job\"})","metric":"","interval":"","step":600,"legendFormat":"GPU
    {{"{{minor_number}} by {{role_name}}-{{task_index}}"}}","intervalFactor":2,"instant":false,"refId":"A"}],"transparent":false,"yaxes":[{"logBase":1,"show":true,"max":"100","format":"percent","min":null,"label":""},{"logBase":1,"show":true,"max":"100","format":"percent","min":null,"decimals":null}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[{"alias":"/Apps|Buffers|Cached|Free|Slab|SwapCached|PageTables|VmallocUsed/"},{"alias":"Swap"}],"percentage":false,"type":"graph","dashes":false,"error":false,"editable":true,"grid":{},"dashLength":10,"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"timeShift":null,"aliasColors":{"Slab":"#E5A8E2","Swap":"#E24D42"},"lines":true,"points":false,"datasource":"PM","pointradius":5,"minSpan":2,"decimals":2},{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"connected","renderer":"flot","linewidth":1,"steppedLine":false,"id":25,"fill":0,"span":6,"title":"Task
    Per GPU Memory Usage","tooltip":{"sort":0,"shared":true,"value_type":"individual","msResolution":false},"stack":false,"targets":[{"hide":false,"target":"","expr":"avg
    by (job_name, role_name, task_index, minor_number) (task_gpu_mem_percent{job_name=~\"$job\"})","metric":"","interval":"","step":600,"legendFormat":"GPU
    {{"{{minor_number}} by {{role_name}}-{{task_index}}"}}","intervalFactor":2,"instant":false,"refId":"A"}],"transparent":false,"yaxes":[{"show":true,"max":null,"logBase":1,"min":0,"format":"percent"},{"show":false,"max":null,"logBase":1,"min":null,"format":"short"}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[{"alias":"/Apps|Buffers|Cached|Free|Slab|SwapCached|PageTables|VmallocUsed/"},{"alias":"Swap"}],"percentage":false,"type":"graph","dashes":false,"error":false,"editable":true,"grid":{},"dashLength":10,"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"timeShift":null,"aliasColors":{"Slab":"#E5A8E2","Swap":"#E24D42"},"lines":true,"points":false,"datasource":"PM","pointradius":5,"minSpan":2,"decimals":2}],"showTitle":true,"collapse":false}],"description":"Dashboard
    to view multiple servers","links":[],"tags":[],"graphTooltip":0,"hideControls":false,"title":"TaskLevelMetrics","editable":true,"refresh":"30s","id":null,"gnetId":null,"timepicker":{"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"],"now":true,"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"]},"version":16,"time":{"to":"now","from":"now-15m"},"timezone":"browser","schemaVersion":14,"annotations":{"list":[{"enable":true,"hide":true,"name":"Annotations
    & Alerts","builtIn":1,"datasource":"-- Grafana --","type":"dashboard","iconColor":"rgba(0,
    211, 255, 1)"}]},"templating":{"list":[{"regex":"^(?!\\s*$).+","sort":1,"multi":false,"hide":0,"name":"job","tags":[],"allValue":null,"tagValuesQuery":"","allFormat":"glob","refresh":1,"label":"","current":{"text":"","value":["$__all"]},"options":[],"datasource":"PM","type":"query","query":"label_values(task_cpu_percent,
    job_name)","useTags":false,"tagsQuery":"","multiFormat":"regex values","includeAll":false}]}}}'
  k8s-node-dashboard.json: '{"dashboard":{"style":"dark","rows":[{"repeat":null,"titleSize":"h6","repeatIteration":null,"title":"Dashboard Row","height":"250px","repeatRowId":null,"panels":[{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"null","renderer":"flot","id":1,"linewidth":1,"steppedLine":false,"targets":[{"intervalFactor":2,"expr":"k8s_node_cpu_available","refId":"A","legendFormat":"{{"{{host_ip}}"}}","format":"time_series"}],"fill":0,"span":6,"title":"Node CPU Available","tooltip":{"sort":0,"shared":true,"value_type":"individual"},"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"yaxes":[{"logBase":1,"show":true,"max":null,"format":"short","min":null,"label":null},{"logBase":1,"show":true,"max":null,"format":"short","min":null,"label":null}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"dashLength":10,"stack":false,"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":null,"pointradius":5},{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"null","renderer":"flot","id":2,"linewidth":1,"steppedLine":false,"targets":[{"intervalFactor":2,"expr":"k8s_node_cpu_total","refId":"A","legendFormat":"{{"{{host_ip}}"}}","format":"time_series"}],"fill":0,"span":6,"title":"Node CPU Total","tooltip":{"sort":0,"shared":true,"value_type":"individual"},"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"yaxes":[{"logBase":1,"show":true,"max":null,"format":"short","min":null,"label":null},{"logBase":1,"show":true,"max":null,"format":"short","min":null,"label":null}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"dashLength":10,"stack":false,"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":null,"pointradius":5}],"showTitle":false,"collapse":false},{"repeat":null,"titleSize":"h6","repeatIteration":null,"title":"Dashboard Row","height":250,"repeatRowId":null,"panels":[{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"null","renderer":"flot","id":3,"linewidth":1,"steppedLine":false,"targets":[{"intervalFactor":2,"expr":"k8s_node_mem_available","refId":"A","legendFormat":"{{"{{host_ip}}"}}","format":"time_series"}],"fill":0,"span":6,"title":"Node Memory Available","tooltip":{"sort":0,"shared":true,"value_type":"individual"},"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"yaxes":[{"logBase":1,"show":true,"max":null,"format":"decbytes","min":null,"label":null},{"logBase":1,"show":true,"max":null,"format":"short","min":null,"label":null}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"dashLength":10,"stack":false,"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":null,"pointradius":5},{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"null","renderer":"flot","id":4,"linewidth":1,"steppedLine":false,"targets":[{"intervalFactor":2,"expr":"k8s_node_mem_total","refId":"A","legendFormat":"{{"{{host_ip}}"}}","format":"time_series"}],"fill":0,"span":6,"title":"Node Memory Total","tooltip":{"sort":0,"shared":true,"value_type":"individual"},"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"yaxes":[{"logBase":1,"show":true,"max":null,"format":"decbytes","min":null,"label":null},{"logBase":1,"show":true,"max":null,"format":"short","min":null,"label":null}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"dashLength":10,"stack":false,"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":null,"pointradius":5}],"showTitle":false,"collapse":false},{"repeat":null,"titleSize":"h6","repeatIteration":null,"title":"Dashboard Row","height":250,"repeatRowId":null,"panels":[{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"null","renderer":"flot","id":5,"linewidth":1,"steppedLine":false,"targets":[{"intervalFactor":2,"expr":"k8s_node_gpu_available","refId":"A","legendFormat":"{{"{{host_ip}}"}}","format":"time_series"}],"fill":0,"span":6,"title":"Node GPU Available","tooltip":{"sort":0,"shared":true,"value_type":"individual"},"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"yaxes":[{"logBase":1,"show":true,"max":null,"format":"short","min":null,"label":null},{"logBase":1,"show":true,"max":null,"format":"short","min":null,"label":null}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"dashLength":10,"stack":false,"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":null,"pointradius":5},{"bars":false,"timeFrom":null,"links":[],"thresholds":[],"spaceLength":10,"nullPointMode":"null","renderer":"flot","id":6,"linewidth":1,"steppedLine":false,"targets":[{"intervalFactor":2,"expr":"k8s_node_gpu_total","refId":"A","legendFormat":"{{"{{host_ip}}"}}","format":"time_series"}],"fill":0,"span":6,"title":"Node GPU Total","tooltip":{"sort":0,"shared":true,"value_type":"individual"},"legend":{"total":false,"show":true,"max":false,"min":false,"current":false,"values":false,"avg":false},"yaxes":[{"logBase":1,"show":true,"max":null,"format":"short","min":null,"label":null},{"logBase":1,"show":true,"max":null,"format":"short","min":null,"label":null}],"xaxis":{"buckets":null,"show":true,"values":[],"mode":"time","name":null},"seriesOverrides":[],"percentage":false,"type":"graph","dashes":false,"dashLength":10,"stack":false,"timeShift":null,"aliasColors":{},"lines":true,"points":false,"datasource":null,"pointradius":5}],"showTitle":false,"collapse":false}],"templating":{"list":[]},"links":[],"tags":[],"graphTooltip":0,"hideControls":false,"title":"k8s node resource","editable":true,"refresh":"30s","annotations":{"list":[{"enable":true,"hide":true,"name":"Annotations & Alerts","builtIn":1,"datasource":"-- Grafana --","type":"dashboard","iconColor":"rgba(0, 211, 255, 1)"}]},"gnetId":null,"timepicker":{"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"],"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"]},"version":0,"time":{"to":"now","from":"now-15m"},"timezone":"","schemaVersion":14,"id":null}}'
  prom-datasource.json: '{"name":"PM","url":"http://{{ prometheus_url }}/prometheus","basicAuth":false,"access":"proxy","type":"prometheus","isDefault":true}'
